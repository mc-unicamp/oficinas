{"version":3,"file":"vue-render-plugin.min.js","sources":["../src/filters.js","../src/mixin.js","../node_modules/vue-runtime-helpers/dist/normalize-component.js","../node_modules/vue-runtime-helpers/dist/inject-style/browser.js","../src/index.js"],"sourcesContent":["import Vue from 'vue';\n\nVue.filter('kebab', (str) => {\n    const replace = s =>  s.toLowerCase().replace(/ /g, '-');\n\n    return Array.isArray(str) ?  str.map(replace) : replace(str);\n});","export default {\n    props: ['node', 'editor', 'bindSocket', 'bindControl'],\n    methods: {\n        inputs() {\n            return Array.from(this.node.inputs.values())\n        },\n        outputs() {\n            return Array.from(this.node.outputs.values())\n        },\n        controls() {\n            return Array.from(this.node.controls.values())\n        },\n        selected() {\n            return this.editor.selected.contains(this.node) ? 'selected' : '';\n        }\n    },\n    directives: {\n        socket: {\n            bind(el, binding, vnode) {\n                vnode.context.bindSocket(el, binding.arg, binding.value);\n            },\n            update(el, binding, vnode) {\n                vnode.context.bindSocket(el, binding.arg, binding.value);\n            }\n        },\n        control: {\n            bind(el, binding, vnode) {\n                if (!binding.value) return;\n\n                vnode.context.bindControl(el, binding.value);\n            }\n        }\n    }\n}","'use strict';\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nmodule.exports = normalizeComponent;\n//# sourceMappingURL=normalize-component.js.map\n","'use strict';\n\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nmodule.exports = createInjector;\n//# sourceMappingURL=browser.js.map\n","import './filters';\nimport Node from './Node.vue';\nimport Socket from './Socket.vue';\nimport Vue from 'vue';\nimport mixin from './mixin';\n\nfunction createVue(el, vueComponent, vueProps, options = {}) {\n    const app = new Vue({\n        render: h => h(vueComponent, { props: vueProps }),\n        ...options\n    });\n\n    const nodeEl = document.createElement('div');\n\n    el.appendChild(nodeEl);\n    app.$mount(nodeEl);\n    \n    return app;\n}\n\nfunction createNode(editor, CommonVueComponent, { el, node, component, bindSocket, bindControl }, options) {\n    const vueComponent = component.component || CommonVueComponent || Node;\n    const vueProps = { ...component.props, node, editor, bindSocket, bindControl };\n    const app = createVue(el, vueComponent, vueProps, options);\n\n    node.vueContext = app.$children[0];\n\n    return app;\n}\n\nfunction createControl(editor, { el, control }, options) {\n    const vueComponent = control.component;\n    const vueProps = { ...control.props, getData: control.getData.bind(control), putData: control.putData.bind(control) };\n    const app = createVue(el, vueComponent, vueProps, options);\n\n    control.vueContext = app.$children[0];\n\n    return app;\n}\n\nconst update = (entity) => {\n    return new Promise((res) => {\n        if (!entity.vueContext) return res();\n\n        entity.vueContext.$forceUpdate();\n        entity.vueContext.$nextTick(res);\n    });\n}\n\nfunction install(editor, { component: CommonVueComponent, options }) {\n    editor.on('rendernode', ({ el, node, component, bindSocket, bindControl }) => {\n        if (component.render && component.render !== 'vue') return;\n        node._vue = createNode(editor, CommonVueComponent, { el, node, component, bindSocket, bindControl }, options);\n        node.update = async () => await update(node);\n    });\n\n    editor.on('rendercontrol', ({ el, control }) => {\n        if (control.render && control.render !== 'vue') return;\n        control._vue = createControl(editor, { el, control }, options);\n        control.update = async () => await update(control)\n    });\n\n    editor.on('connectioncreated connectionremoved', connection => {\n        update(connection.output.node)\n        update(connection.input.node)\n    });\n\n    editor.on('nodeselected', () => {\n        editor.nodes.map(update);\n    });\n}\n\nexport default {\n    name: 'vue-render',\n    install,\n    mixin,\n    Node,\n    Socket\n}\n"],"names":["filter","str","replace","s","toLowerCase","Array","isArray","map","props","methods","inputs","from","this","node","values","outputs","controls","selected","editor","contains","directives","socket","bind","el","binding","vnode","context","bindSocket","arg","value","update","control","bindControl","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","options","render","staticRenderFns","_compiled","functional","_scopeId","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","isOldIE","navigator","test","userAgent","HEAD","document","head","getElementsByTagName","styles","id","css","group","media","ids","Set","has","code","source","sources","btoa","unescape","encodeURIComponent","JSON","stringify","element","createElement","type","setAttribute","appendChild","push","styleSheet","cssText","Boolean","join","index","size","textNode","createTextNode","nodes","childNodes","removeChild","length","insertBefore","addStyle","createVue","vueComponent","vueProps","app","Vue","nodeEl","$mount","entity","Promise","res","vueContext","$forceUpdate","$nextTick","name","install","CommonVueComponent","component","on","_vue","Node","$children","createNode","getData","putData","createControl","connection","output","input","mixin","Socket"],"mappings":"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"}